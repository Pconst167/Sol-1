0001   0000             ; --- FILENAME: test
0002   0000             .include "lib/asm/kernel.exp"
0001+  0000             text_org    .EQU  $0400
0002+  0000             sys_bkpt         .EQU  $0000
0003+  0000             sys_rtc          .EQU  $0001
0004+  0000             sys_ide          .EQU  $0002
0005+  0000             sys_io           .EQU  $0003
0006+  0000             sys_filesystem   .EQU  $0004
0007+  0000             sys_spawn_proc   .EQU  $0005
0008+  0000             sys_list         .EQU  $0006
0009+  0000             sys_datetime     .EQU  $0007
0010+  0000             sys_reboot       .EQU  $0008
0011+  0000             sys_pause_proc   .EQU  $0009
0012+  0000             sys_resume_proc  .EQU  $000a
0013+  0000             sys_terminate_proc .EQU  $000b
0014+  0000             sys_system       .EQU  $000c
0015+  0000             sys_boot_install .EQU  $000d
0003   0000             .include "lib/asm/bios.exp"
0001+  0000             BIOS_RESET_VECTOR .EQU  $01c0
0002+  0000             IDE_buffer       .EQU  $8204
0003+  0000             boot_origin      .EQU  $8004
0004+  0000             bios_uart        .EQU  $0002
0005+  0000             bios_ide         .EQU  $0003
0004   0400             .org text_org
0005   0400             
0006   0400             ; --- BEGIN TEXT BLOCK
0007   0400             main:
0008   0400 FD 49 E0 FF   mov bp, $FFE0 ;
0009   0404 FD 47 E0 FF   mov sp, $FFE0 ; Make space for argc(2 bytes) and for 10 pointers in argv (local variables)
0010   0408             ; $i 
0011   0408 10 00 00      mov a, $0
0012   040B 45 FF FF      mov [bp + -1], a
0013   040E 52 02 00      sub sp, 2
0014   0411             ;; label: 
0015   0411             main_label:
0016   0411             ;; i++; 
0017   0411 FA FF FF      lea d, [bp + -1] ; $i
0018   0414 2A            mov b, [d]
0019   0415 D8            push b
0020   0416 FD 77         inc b
0021   0418 FA FF FF      lea d, [bp + -1] ; $i
0022   041B FD 43         mov [d], b
0023   041D E5            pop b
0024   041E             ;; if(i >= 100) goto label; 
0025   041E             _if1_cond:
0026   041E FA FF FF      lea d, [bp + -1] ; $i
0027   0421 2A            mov b, [d]
0028   0422             ; START RELATIONAL
0029   0422 D7            push a
0030   0423 11            mov a, b
0031   0424 26 64 00      mov b, $64
0032   0427 B0            cmp a, b
0033   0428 FD 80         sge ; >=
0034   042A E4            pop a
0035   042B             ; END RELATIONAL
0036   042B C0 00 00      cmp b, 0
0037   042E C6 37 04      je _if1_else
0038   0431             _if1_true:
0039   0431             ;; goto label; 
0040   0431 0A 11 04      jmp main_label
0041   0434 0A 3A 04      jmp _if1_exit
0042   0437             _if1_else:
0043   0437             ;; goto label; 
0044   0437 0A 11 04      jmp main_label
0045   043A             _if1_exit:
0046   043A             ;; exit: 
0047   043A             main_exit:
0048   043A             ;; return; 
0049   043A F9            leave
0050   043B 05 0B         syscall sys_terminate_proc
0051   043D             ; --- END TEXT BLOCK
0052   043D             
0053   043D             ; --- BEGIN DATA BLOCK
0054   043D 00 00 00 00 _l_data: .fill 1060, 0
0054   0441 00 00 00 00 
0054   0445 00 00 00 00 
0054   0449 00 00 00 00 
0054   044D 00 00 00 00 
0054   0451 00 00 00 00 
0054   0455 00 00 00 00 
0054   0459 00 00 00 00 
0054   045D 00 00 00 00 
0054   0461 00 00 00 00 
0054   0465 00 00 00 00 
0054   0469 00 00 00 00 
0054   046D 00 00 00 00 
0054   0471 00 00 00 00 
0054   0475 00 00 00 00 
0054   0479 00 00 00 00 
0054   047D 00 00 00 00 
0054   0481 00 00 00 00 
0054   0485 00 00 00 00 
0054   0489 00 00 00 00 
0054   048D 00 00 00 00 
0054   0491 00 00 00 00 
0054   0495 00 00 00 00 
0054   0499 00 00 00 00 
0054   049D 00 00 00 00 
0054   04A1 00 00 00 00 
0054   04A5 00 00 00 00 
0054   04A9 00 00 00 00 
0054   04AD 00 00 00 00 
0054   04B1 00 00 00 00 
0054   04B5 00 00 00 00 
0054   04B9 00 00 00 00 
0054   04BD 00 00 00 00 
0054   04C1 00 00 00 00 
0054   04C5 00 00 00 00 
0054   04C9 00 00 00 00 
0054   04CD 00 00 00 00 
0054   04D1 00 00 00 00 
0054   04D5 00 00 00 00 
0054   04D9 00 00 00 00 
0054   04DD 00 00 00 00 
0054   04E1 00 00 00 00 
0054   04E5 00 00 00 00 
0054   04E9 00 00 00 00 
0054   04ED 00 00 00 00 
0054   04F1 00 00 00 00 
0054   04F5 00 00 00 00 
0054   04F9 00 00 00 00 
0054   04FD 00 00 00 00 
0054   0501 00 00 00 00 
0054   0505 00 00 00 00 
0054   0509 00 00 00 00 
0054   050D 00 00 00 00 
0054   0511 00 00 00 00 
0054   0515 00 00 00 00 
0054   0519 00 00 00 00 
0054   051D 00 00 00 00 
0054   0521 00 00 00 00 
0054   0525 00 00 00 00 
0054   0529 00 00 00 00 
0054   052D 00 00 00 00 
0054   0531 00 00 00 00 
0054   0535 00 00 00 00 
0054   0539 00 00 00 00 
0054   053D 00 00 00 00 
0054   0541 00 00 00 00 
0054   0545 00 00 00 00 
0054   0549 00 00 00 00 
0054   054D 00 00 00 00 
0054   0551 00 00 00 00 
0054   0555 00 00 00 00 
0054   0559 00 00 00 00 
0054   055D 00 00 00 00 
0054   0561 00 00 00 00 
0054   0565 00 00 00 00 
0054   0569 00 00 00 00 
0054   056D 00 00 00 00 
0054   0571 00 00 00 00 
0054   0575 00 00 00 00 
0054   0579 00 00 00 00 
0054   057D 00 00 00 00 
0054   0581 00 00 00 00 
0054   0585 00 00 00 00 
0054   0589 00 00 00 00 
0054   058D 00 00 00 00 
0054   0591 00 00 00 00 
0054   0595 00 00 00 00 
0054   0599 00 00 00 00 
0054   059D 00 00 00 00 
0054   05A1 00 00 00 00 
0054   05A5 00 00 00 00 
0054   05A9 00 00 00 00 
0054   05AD 00 00 00 00 
0054   05B1 00 00 00 00 
0054   05B5 00 00 00 00 
0054   05B9 00 00 00 00 
0054   05BD 00 00 00 00 
0054   05C1 00 00 00 00 
0054   05C5 00 00 00 00 
0054   05C9 00 00 00 00 
0054   05CD 00 00 00 00 
0054   05D1 00 00 00 00 
0054   05D5 00 00 00 00 
0054   05D9 00 00 00 00 
0054   05DD 00 00 00 00 
0054   05E1 00 00 00 00 
0054   05E5 00 00 00 00 
0054   05E9 00 00 00 00 
0054   05ED 00 00 00 00 
0054   05F1 00 00 00 00 
0054   05F5 00 00 00 00 
0054   05F9 00 00 00 00 
0054   05FD 00 00 00 00 
0054   0601 00 00 00 00 
0054   0605 00 00 00 00 
0054   0609 00 00 00 00 
0054   060D 00 00 00 00 
0054   0611 00 00 00 00 
0054   0615 00 00 00 00 
0054   0619 00 00 00 00 
0054   061D 00 00 00 00 
0054   0621 00 00 00 00 
0054   0625 00 00 00 00 
0054   0629 00 00 00 00 
0054   062D 00 00 00 00 
0054   0631 00 00 00 00 
0054   0635 00 00 00 00 
0054   0639 00 00 00 00 
0054   063D 00 00 00 00 
0054   0641 00 00 00 00 
0054   0645 00 00 00 00 
0054   0649 00 00 00 00 
0054   064D 00 00 00 00 
0054   0651 00 00 00 00 
0054   0655 00 00 00 00 
0054   0659 00 00 00 00 
0054   065D 00 00 00 00 
0054   0661 00 00 00 00 
0054   0665 00 00 00 00 
0054   0669 00 00 00 00 
0054   066D 00 00 00 00 
0054   0671 00 00 00 00 
0054   0675 00 00 00 00 
0054   0679 00 00 00 00 
0054   067D 00 00 00 00 
0054   0681 00 00 00 00 
0054   0685 00 00 00 00 
0054   0689 00 00 00 00 
0054   068D 00 00 00 00 
0054   0691 00 00 00 00 
0054   0695 00 00 00 00 
0054   0699 00 00 00 00 
0054   069D 00 00 00 00 
0054   06A1 00 00 00 00 
0054   06A5 00 00 00 00 
0054   06A9 00 00 00 00 
0054   06AD 00 00 00 00 
0054   06B1 00 00 00 00 
0054   06B5 00 00 00 00 
0054   06B9 00 00 00 00 
0054   06BD 00 00 00 00 
0054   06C1 00 00 00 00 
0054   06C5 00 00 00 00 
0054   06C9 00 00 00 00 
0054   06CD 00 00 00 00 
0054   06D1 00 00 00 00 
0054   06D5 00 00 00 00 
0054   06D9 00 00 00 00 
0054   06DD 00 00 00 00 
0054   06E1 00 00 00 00 
0054   06E5 00 00 00 00 
0054   06E9 00 00 00 00 
0054   06ED 00 00 00 00 
0054   06F1 00 00 00 00 
0054   06F5 00 00 00 00 
0054   06F9 00 00 00 00 
0054   06FD 00 00 00 00 
0054   0701 00 00 00 00 
0054   0705 00 00 00 00 
0054   0709 00 00 00 00 
0054   070D 00 00 00 00 
0054   0711 00 00 00 00 
0054   0715 00 00 00 00 
0054   0719 00 00 00 00 
0054   071D 00 00 00 00 
0054   0721 00 00 00 00 
0054   0725 00 00 00 00 
0054   0729 00 00 00 00 
0054   072D 00 00 00 00 
0054   0731 00 00 00 00 
0054   0735 00 00 00 00 
0054   0739 00 00 00 00 
0054   073D 00 00 00 00 
0054   0741 00 00 00 00 
0054   0745 00 00 00 00 
0054   0749 00 00 00 00 
0054   074D 00 00 00 00 
0054   0751 00 00 00 00 
0054   0755 00 00 00 00 
0054   0759 00 00 00 00 
0054   075D 00 00 00 00 
0054   0761 00 00 00 00 
0054   0765 00 00 00 00 
0054   0769 00 00 00 00 
0054   076D 00 00 00 00 
0054   0771 00 00 00 00 
0054   0775 00 00 00 00 
0054   0779 00 00 00 00 
0054   077D 00 00 00 00 
0054   0781 00 00 00 00 
0054   0785 00 00 00 00 
0054   0789 00 00 00 00 
0054   078D 00 00 00 00 
0054   0791 00 00 00 00 
0054   0795 00 00 00 00 
0054   0799 00 00 00 00 
0054   079D 00 00 00 00 
0054   07A1 00 00 00 00 
0054   07A5 00 00 00 00 
0054   07A9 00 00 00 00 
0054   07AD 00 00 00 00 
0054   07B1 00 00 00 00 
0054   07B5 00 00 00 00 
0054   07B9 00 00 00 00 
0054   07BD 00 00 00 00 
0054   07C1 00 00 00 00 
0054   07C5 00 00 00 00 
0054   07C9 00 00 00 00 
0054   07CD 00 00 00 00 
0054   07D1 00 00 00 00 
0054   07D5 00 00 00 00 
0054   07D9 00 00 00 00 
0054   07DD 00 00 00 00 
0054   07E1 00 00 00 00 
0054   07E5 00 00 00 00 
0054   07E9 00 00 00 00 
0054   07ED 00 00 00 00 
0054   07F1 00 00 00 00 
0054   07F5 00 00 00 00 
0054   07F9 00 00 00 00 
0054   07FD 00 00 00 00 
0054   0801 00 00 00 00 
0054   0805 00 00 00 00 
0054   0809 00 00 00 00 
0054   080D 00 00 00 00 
0054   0811 00 00 00 00 
0054   0815 00 00 00 00 
0054   0819 00 00 00 00 
0054   081D 00 00 00 00 
0054   0821 00 00 00 00 
0054   0825 00 00 00 00 
0054   0829 00 00 00 00 
0054   082D 00 00 00 00 
0054   0831 00 00 00 00 
0054   0835 00 00 00 00 
0054   0839 00 00 00 00 
0054   083D 00 00 00 00 
0054   0841 00 00 00 00 
0054   0845 00 00 00 00 
0054   0849 00 00 00 00 
0054   084D 00 00 00 00 
0054   0851 00 00 00 00 
0054   0855 00 00 00 00 
0054   0859 00 00 00 00 
0054   085D 00 00 00 00 
0055   0861 00 00       _p: .fill 2, 0
0056   0863             
0057   0863 65 08       _heap_top: .dw _heap
0058   0865 00          _heap: .db 0
0059   0866             ; --- END DATA BLOCK
0060   0866             
0061   0866             .end
tasm: Number of errors = 0
