0001   0000             ; --- FILENAME: test
0002   0000             .include "lib/asm/kernel.exp"
0001+  0000             text_org    .EQU  $0400
0002+  0000             sys_bkpt         .EQU  $0000
0003+  0000             sys_rtc          .EQU  $0001
0004+  0000             sys_ide          .EQU  $0002
0005+  0000             sys_io           .EQU  $0003
0006+  0000             sys_filesystem   .EQU  $0004
0007+  0000             sys_spawn_proc   .EQU  $0005
0008+  0000             sys_list         .EQU  $0006
0009+  0000             sys_datetime     .EQU  $0007
0010+  0000             sys_reboot       .EQU  $0008
0011+  0000             sys_pause_proc   .EQU  $0009
0012+  0000             sys_resume_proc  .EQU  $000a
0013+  0000             sys_terminate_proc .EQU  $000b
0014+  0000             sys_system       .EQU  $000c
0015+  0000             sys_boot_install .EQU  $000d
0003   0000             .include "lib/asm/bios.exp"
0001+  0000             BIOS_RESET_VECTOR .EQU  $01c0
0002+  0000             IDE_buffer       .EQU  $8204
0003+  0000             boot_origin      .EQU  $8004
0004+  0000             bios_uart        .EQU  $0002
0005+  0000             bios_ide         .EQU  $0003
0004   0400             .org text_org
0005   0400             
0006   0400             ; --- BEGIN TEXT BLOCK
0007   0400             main:
0008   0400 FD 49 E0 FF   mov bp, $FFE0 ;
0009   0404 FD 47 E0 FF   mov sp, $FFE0 ; Make space for argc(2 bytes) and for 10 pointers in argv (local variables)
0010   0408             ;; aa=1; 
0011   0408 3B 40 08      mov d, _static_main_aa ; static aa
0012   040B DA            push d
0013   040C 26 01 00      mov b, $1
0014   040F E7            pop d
0015   0410 FD 43         mov [d], b
0016   0412 28            mov b, c
0017   0413 FD 44 02 00   mov [d + 2], b
0018   0417             ;; return; 
0019   0417 F9            leave
0020   0418 05 0B         syscall sys_terminate_proc
0021   041A             ; --- END TEXT BLOCK
0022   041A             
0023   041A             ; --- BEGIN DATA BLOCK
0024   041A 00 00 00 00 _l_data: .fill 1060, 0
0024   041E 00 00 00 00 
0024   0422 00 00 00 00 
0024   0426 00 00 00 00 
0024   042A 00 00 00 00 
0024   042E 00 00 00 00 
0024   0432 00 00 00 00 
0024   0436 00 00 00 00 
0024   043A 00 00 00 00 
0024   043E 00 00 00 00 
0024   0442 00 00 00 00 
0024   0446 00 00 00 00 
0024   044A 00 00 00 00 
0024   044E 00 00 00 00 
0024   0452 00 00 00 00 
0024   0456 00 00 00 00 
0024   045A 00 00 00 00 
0024   045E 00 00 00 00 
0024   0462 00 00 00 00 
0024   0466 00 00 00 00 
0024   046A 00 00 00 00 
0024   046E 00 00 00 00 
0024   0472 00 00 00 00 
0024   0476 00 00 00 00 
0024   047A 00 00 00 00 
0024   047E 00 00 00 00 
0024   0482 00 00 00 00 
0024   0486 00 00 00 00 
0024   048A 00 00 00 00 
0024   048E 00 00 00 00 
0024   0492 00 00 00 00 
0024   0496 00 00 00 00 
0024   049A 00 00 00 00 
0024   049E 00 00 00 00 
0024   04A2 00 00 00 00 
0024   04A6 00 00 00 00 
0024   04AA 00 00 00 00 
0024   04AE 00 00 00 00 
0024   04B2 00 00 00 00 
0024   04B6 00 00 00 00 
0024   04BA 00 00 00 00 
0024   04BE 00 00 00 00 
0024   04C2 00 00 00 00 
0024   04C6 00 00 00 00 
0024   04CA 00 00 00 00 
0024   04CE 00 00 00 00 
0024   04D2 00 00 00 00 
0024   04D6 00 00 00 00 
0024   04DA 00 00 00 00 
0024   04DE 00 00 00 00 
0024   04E2 00 00 00 00 
0024   04E6 00 00 00 00 
0024   04EA 00 00 00 00 
0024   04EE 00 00 00 00 
0024   04F2 00 00 00 00 
0024   04F6 00 00 00 00 
0024   04FA 00 00 00 00 
0024   04FE 00 00 00 00 
0024   0502 00 00 00 00 
0024   0506 00 00 00 00 
0024   050A 00 00 00 00 
0024   050E 00 00 00 00 
0024   0512 00 00 00 00 
0024   0516 00 00 00 00 
0024   051A 00 00 00 00 
0024   051E 00 00 00 00 
0024   0522 00 00 00 00 
0024   0526 00 00 00 00 
0024   052A 00 00 00 00 
0024   052E 00 00 00 00 
0024   0532 00 00 00 00 
0024   0536 00 00 00 00 
0024   053A 00 00 00 00 
0024   053E 00 00 00 00 
0024   0542 00 00 00 00 
0024   0546 00 00 00 00 
0024   054A 00 00 00 00 
0024   054E 00 00 00 00 
0024   0552 00 00 00 00 
0024   0556 00 00 00 00 
0024   055A 00 00 00 00 
0024   055E 00 00 00 00 
0024   0562 00 00 00 00 
0024   0566 00 00 00 00 
0024   056A 00 00 00 00 
0024   056E 00 00 00 00 
0024   0572 00 00 00 00 
0024   0576 00 00 00 00 
0024   057A 00 00 00 00 
0024   057E 00 00 00 00 
0024   0582 00 00 00 00 
0024   0586 00 00 00 00 
0024   058A 00 00 00 00 
0024   058E 00 00 00 00 
0024   0592 00 00 00 00 
0024   0596 00 00 00 00 
0024   059A 00 00 00 00 
0024   059E 00 00 00 00 
0024   05A2 00 00 00 00 
0024   05A6 00 00 00 00 
0024   05AA 00 00 00 00 
0024   05AE 00 00 00 00 
0024   05B2 00 00 00 00 
0024   05B6 00 00 00 00 
0024   05BA 00 00 00 00 
0024   05BE 00 00 00 00 
0024   05C2 00 00 00 00 
0024   05C6 00 00 00 00 
0024   05CA 00 00 00 00 
0024   05CE 00 00 00 00 
0024   05D2 00 00 00 00 
0024   05D6 00 00 00 00 
0024   05DA 00 00 00 00 
0024   05DE 00 00 00 00 
0024   05E2 00 00 00 00 
0024   05E6 00 00 00 00 
0024   05EA 00 00 00 00 
0024   05EE 00 00 00 00 
0024   05F2 00 00 00 00 
0024   05F6 00 00 00 00 
0024   05FA 00 00 00 00 
0024   05FE 00 00 00 00 
0024   0602 00 00 00 00 
0024   0606 00 00 00 00 
0024   060A 00 00 00 00 
0024   060E 00 00 00 00 
0024   0612 00 00 00 00 
0024   0616 00 00 00 00 
0024   061A 00 00 00 00 
0024   061E 00 00 00 00 
0024   0622 00 00 00 00 
0024   0626 00 00 00 00 
0024   062A 00 00 00 00 
0024   062E 00 00 00 00 
0024   0632 00 00 00 00 
0024   0636 00 00 00 00 
0024   063A 00 00 00 00 
0024   063E 00 00 00 00 
0024   0642 00 00 00 00 
0024   0646 00 00 00 00 
0024   064A 00 00 00 00 
0024   064E 00 00 00 00 
0024   0652 00 00 00 00 
0024   0656 00 00 00 00 
0024   065A 00 00 00 00 
0024   065E 00 00 00 00 
0024   0662 00 00 00 00 
0024   0666 00 00 00 00 
0024   066A 00 00 00 00 
0024   066E 00 00 00 00 
0024   0672 00 00 00 00 
0024   0676 00 00 00 00 
0024   067A 00 00 00 00 
0024   067E 00 00 00 00 
0024   0682 00 00 00 00 
0024   0686 00 00 00 00 
0024   068A 00 00 00 00 
0024   068E 00 00 00 00 
0024   0692 00 00 00 00 
0024   0696 00 00 00 00 
0024   069A 00 00 00 00 
0024   069E 00 00 00 00 
0024   06A2 00 00 00 00 
0024   06A6 00 00 00 00 
0024   06AA 00 00 00 00 
0024   06AE 00 00 00 00 
0024   06B2 00 00 00 00 
0024   06B6 00 00 00 00 
0024   06BA 00 00 00 00 
0024   06BE 00 00 00 00 
0024   06C2 00 00 00 00 
0024   06C6 00 00 00 00 
0024   06CA 00 00 00 00 
0024   06CE 00 00 00 00 
0024   06D2 00 00 00 00 
0024   06D6 00 00 00 00 
0024   06DA 00 00 00 00 
0024   06DE 00 00 00 00 
0024   06E2 00 00 00 00 
0024   06E6 00 00 00 00 
0024   06EA 00 00 00 00 
0024   06EE 00 00 00 00 
0024   06F2 00 00 00 00 
0024   06F6 00 00 00 00 
0024   06FA 00 00 00 00 
0024   06FE 00 00 00 00 
0024   0702 00 00 00 00 
0024   0706 00 00 00 00 
0024   070A 00 00 00 00 
0024   070E 00 00 00 00 
0024   0712 00 00 00 00 
0024   0716 00 00 00 00 
0024   071A 00 00 00 00 
0024   071E 00 00 00 00 
0024   0722 00 00 00 00 
0024   0726 00 00 00 00 
0024   072A 00 00 00 00 
0024   072E 00 00 00 00 
0024   0732 00 00 00 00 
0024   0736 00 00 00 00 
0024   073A 00 00 00 00 
0024   073E 00 00 00 00 
0024   0742 00 00 00 00 
0024   0746 00 00 00 00 
0024   074A 00 00 00 00 
0024   074E 00 00 00 00 
0024   0752 00 00 00 00 
0024   0756 00 00 00 00 
0024   075A 00 00 00 00 
0024   075E 00 00 00 00 
0024   0762 00 00 00 00 
0024   0766 00 00 00 00 
0024   076A 00 00 00 00 
0024   076E 00 00 00 00 
0024   0772 00 00 00 00 
0024   0776 00 00 00 00 
0024   077A 00 00 00 00 
0024   077E 00 00 00 00 
0024   0782 00 00 00 00 
0024   0786 00 00 00 00 
0024   078A 00 00 00 00 
0024   078E 00 00 00 00 
0024   0792 00 00 00 00 
0024   0796 00 00 00 00 
0024   079A 00 00 00 00 
0024   079E 00 00 00 00 
0024   07A2 00 00 00 00 
0024   07A6 00 00 00 00 
0024   07AA 00 00 00 00 
0024   07AE 00 00 00 00 
0024   07B2 00 00 00 00 
0024   07B6 00 00 00 00 
0024   07BA 00 00 00 00 
0024   07BE 00 00 00 00 
0024   07C2 00 00 00 00 
0024   07C6 00 00 00 00 
0024   07CA 00 00 00 00 
0024   07CE 00 00 00 00 
0024   07D2 00 00 00 00 
0024   07D6 00 00 00 00 
0024   07DA 00 00 00 00 
0024   07DE 00 00 00 00 
0024   07E2 00 00 00 00 
0024   07E6 00 00 00 00 
0024   07EA 00 00 00 00 
0024   07EE 00 00 00 00 
0024   07F2 00 00 00 00 
0024   07F6 00 00 00 00 
0024   07FA 00 00 00 00 
0024   07FE 00 00 00 00 
0024   0802 00 00 00 00 
0024   0806 00 00 00 00 
0024   080A 00 00 00 00 
0024   080E 00 00 00 00 
0024   0812 00 00 00 00 
0024   0816 00 00 00 00 
0024   081A 00 00 00 00 
0024   081E 00 00 00 00 
0024   0822 00 00 00 00 
0024   0826 00 00 00 00 
0024   082A 00 00 00 00 
0024   082E 00 00 00 00 
0024   0832 00 00 00 00 
0024   0836 00 00 00 00 
0024   083A 00 00 00 00 
0025   083E 00 00       _p: .fill 2, 0
0026   0840 00 00 00 00 _static_main_aa: .fill 4, 0
0027   0844             
0028   0844 46 08       _heap_top: .dw _heap
0029   0846 00          _heap: .db 0
0030   0847             ; --- END DATA BLOCK
0031   0847             
0032   0847             .end
tasm: Number of errors = 0
