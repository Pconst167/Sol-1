0001   0000             ; --- FILENAME: test
0002   0000             .include "lib/asm/kernel.exp"
0001+  0000             text_org    .EQU  $0400
0002+  0000             sys_bkpt         .EQU  $0000
0003+  0000             sys_rtc          .EQU  $0001
0004+  0000             sys_ide          .EQU  $0002
0005+  0000             sys_io           .EQU  $0003
0006+  0000             sys_filesystem   .EQU  $0004
0007+  0000             sys_spawn_proc   .EQU  $0005
0008+  0000             sys_list         .EQU  $0006
0009+  0000             sys_datetime     .EQU  $0007
0010+  0000             sys_reboot       .EQU  $0008
0011+  0000             sys_pause_proc   .EQU  $0009
0012+  0000             sys_resume_proc  .EQU  $000a
0013+  0000             sys_terminate_proc .EQU  $000b
0014+  0000             sys_system       .EQU  $000c
0015+  0000             sys_boot_install .EQU  $000d
0003   0000             .include "lib/asm/bios.exp"
0001+  0000             BIOS_RESET_VECTOR .EQU  $01c0
0002+  0000             IDE_buffer       .EQU  $8204
0003+  0000             boot_origin      .EQU  $8004
0004+  0000             bios_uart        .EQU  $0002
0005+  0000             bios_ide         .EQU  $0003
0004   0400             .org text_org
0005   0400             
0006   0400             ; --- BEGIN TEXT BLOCK
0007   0400             main:
0008   0400 FD 49 E0 FF   mov bp, $FFE0 ;
0009   0404 FD 47 E0 FF   mov sp, $FFE0 ; Make space for argc(2 bytes) and for 10 pointers in argv (local variables)
0010   0408             ;; "aaaaaaaaaaaaaaaaaaaaa"; 
0011   0408 26 1E 04      mov b, _s0 ; "aaaaaaaaaaaaaaaaaaaaa"
0012   040B 05 0B         syscall sys_terminate_proc
0013   040D             ; --- END TEXT BLOCK
0014   040D             
0015   040D             ; --- BEGIN DATA BLOCK
0016   040D 48 65 6C 6C _s_data: .db "Hello %s World", 0
0016   0411 6F 20 25 73 
0016   0415 20 57 6F 72 
0016   0419 6C 64 00 
0017   041C 0D 04       _s: .dw _s_data
0018   041E 61 61 61 61 _s0: .db "aaaaaaaaaaaaaaaaaaaaa", 0
0018   0422 61 61 61 61 
0018   0426 61 61 61 61 
0018   042A 61 61 61 61 
0018   042E 61 61 61 61 
0018   0432 61 00 
0019   0434 36 04       _heap_top: .dw _heap
0020   0436 00          _heap: .db 0
0021   0437             ; --- END DATA BLOCK
0022   0437             
0023   0437             .end
tasm: Number of errors = 0
