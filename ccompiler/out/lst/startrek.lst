0001   0000             ; --- FILENAME: games/startrek.c
0002   0000             .include "lib/asm/kernel.exp"
0001+  0000             text_org    .EQU  $0400
0002+  0000             sys_bkpt         .EQU  $0000
0003+  0000             sys_rtc          .EQU  $0001
0004+  0000             sys_ide          .EQU  $0002
0005+  0000             sys_io           .EQU  $0003
0006+  0000             sys_filesystem   .EQU  $0004
0007+  0000             sys_spawn_proc   .EQU  $0005
0008+  0000             sys_list         .EQU  $0006
0009+  0000             sys_datetime     .EQU  $0007
0010+  0000             sys_reboot       .EQU  $0008
0011+  0000             sys_pause_proc   .EQU  $0009
0012+  0000             sys_resume_proc  .EQU  $000a
0013+  0000             sys_terminate_proc .EQU  $000b
0014+  0000             sys_system       .EQU  $000c
0015+  0000             sys_boot_install .EQU  $000d
0003   0000             .include "lib/asm/bios.exp"
0001+  0000             BIOS_RESET_VECTOR .EQU  $01c0
0002+  0000             IDE_buffer       .EQU  $8204
0003+  0000             boot_origin      .EQU  $8004
0004+  0000             bios_uart        .EQU  $0002
0005+  0000             bios_ide         .EQU  $0003
0004   0400             .org text_org
0005   0400             
0006   0400             ; --- BEGIN TEXT SEGMENT
0007   0400             main:
0008   0400 FD 49 E0 FF   mov bp, $FFE0 ;
0009   0404 FD 47 E0 FF   mov sp, $FFE0 ; Make space for argc(2 bytes) and for 10 pointers in argv (local variables)
0010   0408             ; return (0); 
0011   0408 FD 2E 00 00   mov32 cb, $00000000
0011   040C 00 00 
0012   040E F9            leave
0013   040F 05 0B         syscall sys_terminate_proc
0014   0411             ; --- END TEXT SEGMENT
0015   0411             
0016   0411             ; --- BEGIN DATA SEGMENT
0017   0411 00          _starbases: .fill 1, 0
0018   0412 00          _base_y: .fill 1, 0
0019   0413 00          _base_x: .fill 1, 0
0020   0414 00          _starbases_left: .fill 1, 0
0021   0415             _c_data: 
0022   0415 00          .db 
0023   0416 00          .db 
0024   0417 00 00 00 FF .db $0,$0,$0,$ffff,$ffff,$ffff,$0,$1,$1,$1,$0,$1,$1,$1,$0,$ffff,$ffff,$ffff,$0,$1,$1,
0024   041B FF FF 00 01 
0024   041F 01 01 00 01 
0024   0423 01 01 00 FF 
0024   0427 FF FF 00 01 
0024   042B 01 
0025   042C 00 00 00 00 .fill 9, 0
0025   0430 00 00 00 00 
0025   0434 00 
0026   0435 00          _docked: .fill 1, 0
0027   0436 00 00       _energy: .fill 2, 0
0028   0438 B8 0B       _energy0: .dw 3000
0029   043A 00 00 00 00 _map_data: .fill 162, 0
0029   043E 00 00 00 00 
0029   0442 00 00 00 00 
0029   0446 00 00 00 00 
0029   044A 00 00 00 00 
0029   044E 00 00 00 00 
0029   0452 00 00 00 00 
0029   0456 00 00 00 00 
0029   045A 00 00 00 00 
0029   045E 00 00 00 00 
0029   0462 00 00 00 00 
0029   0466 00 00 00 00 
0029   046A 00 00 00 00 
0029   046E 00 00 00 00 
0029   0472 00 00 00 00 
0029   0476 00 00 00 00 
0029   047A 00 00 00 00 
0029   047E 00 00 00 00 
0029   0482 00 00 00 00 
0029   0486 00 00 00 00 
0029   048A 00 00 00 00 
0029   048E 00 00 00 00 
0029   0492 00 00 00 00 
0029   0496 00 00 00 00 
0029   049A 00 00 00 00 
0029   049E 00 00 00 00 
0029   04A2 00 00 00 00 
0029   04A6 00 00 00 00 
0029   04AA 00 00 00 00 
0029   04AE 00 00 00 00 
0029   04B2 00 00 00 00 
0029   04B6 00 00 00 00 
0029   04BA 00 00 00 00 
0029   04BE 00 00 00 00 
0029   04C2 00 00 00 00 
0029   04C6 00 00 00 00 
0029   04CA 00 00 00 00 
0029   04CE 00 00 00 00 
0029   04D2 00 00 00 00 
0029   04D6 00 00 00 00 
0029   04DA 00 00 
0030   04DC 00 00 00 00 _kdata_data: .fill 12, 0
0030   04E0 00 00 00 00 
0030   04E4 00 00 00 00 
0031   04E8 00          _klingons: .fill 1, 0
0032   04E9 00          _total_klingons: .fill 1, 0
0033   04EA 00          _klingons_left: .fill 1, 0
0034   04EB 00          _torps: .fill 1, 0
0035   04EC 0A          _torps0: .db 10
0036   04ED 00 00       _quad_y: .fill 2, 0
0037   04EF 00 00       _quad_x: .fill 2, 0
0038   04F1 00 00       _shield: .fill 2, 0
0039   04F3 00          _stars: .fill 1, 0
0040   04F4 00 00       _time_start: .fill 2, 0
0041   04F6 00 00       _time_up: .fill 2, 0
0042   04F8 00 00 00 00 _damage_data: .fill 18, 0
0042   04FC 00 00 00 00 
0042   0500 00 00 00 00 
0042   0504 00 00 00 00 
0042   0508 00 00 
0043   050A 00 00       _d4: .fill 2, 0
0044   050C 00 00       _ship_y: .fill 2, 0
0045   050E 00 00       _ship_x: .fill 2, 0
0046   0510 00 00       _stardate: .fill 2, 0
0047   0512 00 00 00 00 _quad_data: .fill 64, 0
0047   0516 00 00 00 00 
0047   051A 00 00 00 00 
0047   051E 00 00 00 00 
0047   0522 00 00 00 00 
0047   0526 00 00 00 00 
0047   052A 00 00 00 00 
0047   052E 00 00 00 00 
0047   0532 00 00 00 00 
0047   0536 00 00 00 00 
0047   053A 00 00 00 00 
0047   053E 00 00 00 00 
0047   0542 00 00 00 00 
0047   0546 00 00 00 00 
0047   054A 00 00 00 00 
0047   054E 00 00 00 00 
0048   0552 00 00 00 00 _quadname_data: .fill 12, 0
0048   0556 00 00 00 00 
0048   055A 00 00 00 00 
0049   055E 72 65 70 6F _inc_1_data: .db "reports:\n  Incorrect course data, sir!\n", 0
0049   0562 72 74 73 3A 
0049   0566 0A 20 20 49 
0049   056A 6E 63 6F 72 
0049   056E 72 65 63 74 
0049   0572 20 63 6F 75 
0049   0576 72 73 65 20 
0049   057A 64 61 74 61 
0049   057E 2C 20 73 69 
0049   0582 72 21 0A 00 
0050   0586 5E 05       _inc_1: .dw _inc_1_data
0051   0588             _quad_name_data: 
0052   0588 00 00       .dw 
0053   058A 0D 06 0E 06 .dw _s0, _s1, _s2, _s3, _s4, _s5, _s6, _s7, _s8, _s9, _s10, _s11, _s12, _s13, _s14, _s15, _s16, 
0053   058E 16 06 1C 06 
0053   0592 24 06 29 06 
0053   0596 31 06 38 06 
0053   059A 44 06 4B 06 
0053   059E 52 06 58 06 
0053   05A2 60 06 6B 06 
0053   05A6 75 06 7D 06 
0053   05AA 86 06 
0054   05AC 00 00 00 00 .fill 34, 0
0054   05B0 00 00 00 00 
0054   05B4 00 00 00 00 
0054   05B8 00 00 00 00 
0054   05BC 00 00 00 00 
0054   05C0 00 00 00 00 
0054   05C4 00 00 00 00 
0054   05C8 00 00 00 00 
0054   05CC 00 00 
0055   05CE             _device_name_data: 
0056   05CE 00 00       .dw 
0057   05D0 0D 06 8C 06 .dw _s0, _s17, _s18, _s19, _s20, _s21, _s22, _s23, _s24, 
0057   05D4 99 06 AD 06 
0057   05D8 C0 06 CF 06 
0057   05DC DC 06 EB 06 
0057   05E0 FA 06 
0058   05E2 00 00 00 00 .fill 18, 0
0058   05E6 00 00 00 00 
0058   05EA 00 00 00 00 
0058   05EE 00 00 00 00 
0058   05F2 00 00 
0059   05F4 44 61 6D 61 _dcr_1_data: .db "Damage Control report:", 0
0059   05F8 67 65 20 43 
0059   05FC 6F 6E 74 72 
0059   0600 6F 6C 20 72 
0059   0604 65 70 6F 72 
0059   0608 74 3A 00 
0060   060B F4 05       _dcr_1: .dw _dcr_1_data
0061   060D 00          _s0: .db "", 0
0062   060E 41 6E 74 61 _s1: .db "Antares", 0
0062   0612 72 65 73 00 
0063   0616 52 69 67 65 _s2: .db "Rigel", 0
0063   061A 6C 00 
0064   061C 50 72 6F 63 _s3: .db "Procyon", 0
0064   0620 79 6F 6E 00 
0065   0624 56 65 67 61 _s4: .db "Vega", 0
0065   0628 00 
0066   0629 43 61 6E 6F _s5: .db "Canopus", 0
0066   062D 70 75 73 00 
0067   0631 41 6C 74 61 _s6: .db "Altair", 0
0067   0635 69 72 00 
0068   0638 53 61 67 69 _s7: .db "Sagittarius", 0
0068   063C 74 74 61 72 
0068   0640 69 75 73 00 
0069   0644 50 6F 6C 6C _s8: .db "Pollux", 0
0069   0648 75 78 00 
0070   064B 53 69 72 69 _s9: .db "Sirius", 0
0070   064F 75 73 00 
0071   0652 44 65 6E 65 _s10: .db "Deneb", 0
0071   0656 62 00 
0072   0658 43 61 70 65 _s11: .db "Capella", 0
0072   065C 6C 6C 61 00 
0073   0660 42 65 74 65 _s12: .db "Betelgeuse", 0
0073   0664 6C 67 65 75 
0073   0668 73 65 00 
0074   066B 41 6C 64 65 _s13: .db "Aldebaran", 0
0074   066F 62 61 72 61 
0074   0673 6E 00 
0075   0675 52 65 67 75 _s14: .db "Regulus", 0
0075   0679 6C 75 73 00 
0076   067D 41 72 63 74 _s15: .db "Arcturus", 0
0076   0681 75 72 75 73 
0076   0685 00 
0077   0686 53 70 69 63 _s16: .db "Spica", 0
0077   068A 61 00 
0078   068C 57 61 72 70 _s17: .db "Warp engines", 0
0078   0690 20 65 6E 67 
0078   0694 69 6E 65 73 
0078   0698 00 
0079   0699 53 68 6F 72 _s18: .db "Short range sensors", 0
0079   069D 74 20 72 61 
0079   06A1 6E 67 65 20 
0079   06A5 73 65 6E 73 
0079   06A9 6F 72 73 00 
0080   06AD 4C 6F 6E 67 _s19: .db "Long range sensors", 0
0080   06B1 20 72 61 6E 
0080   06B5 67 65 20 73 
0080   06B9 65 6E 73 6F 
0080   06BD 72 73 00 
0081   06C0 50 68 61 73 _s20: .db "Phaser control", 0
0081   06C4 65 72 20 63 
0081   06C8 6F 6E 74 72 
0081   06CC 6F 6C 00 
0082   06CF 50 68 6F 74 _s21: .db "Photon tubes", 0
0082   06D3 6F 6E 20 74 
0082   06D7 75 62 65 73 
0082   06DB 00 
0083   06DC 44 61 6D 61 _s22: .db "Damage control", 0
0083   06E0 67 65 20 63 
0083   06E4 6F 6E 74 72 
0083   06E8 6F 6C 00 
0084   06EB 53 68 69 65 _s23: .db "Shield control", 0
0084   06EF 6C 64 20 63 
0084   06F3 6F 6E 74 72 
0084   06F7 6F 6C 00 
0085   06FA 4C 69 62 72 _s24: .db "Library computer", 0
0085   06FE 61 72 79 20 
0085   0702 63 6F 6D 70 
0085   0706 75 74 65 72 
0085   070A 00 
0086   070B             
0087   070B 0D 07       _heap_top: .dw _heap
0088   070D 00          _heap: .db 0
0089   070E             ; --- END DATA SEGMENT
0090   070E             
0091   070E             .end
tasm: Number of errors = 0
